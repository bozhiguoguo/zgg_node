<!---非外观专利业务填写--->
<link rel="stylesheet" href="/css/modify_subjectInfo.css" >
<link rel="stylesheet" href="/css/personal_center.css" >
<link rel="stylesheet" href="/css/fruit_center.css" >
<link rel="stylesheet" href="/css/words_Copyright.css" >
<style>
    .layui-word-aux{
        padding:3px 0 3px 45px;
        padding-left: 20px;
        margin-left: 30px;
        font-size: 14px;
        line-height: 22px;
        box-sizing: border-box;
        background: url(/img/icon_form_address.png) no-repeat 0px 3px;
        background-size: 16px 16px;
        height: 30px;
    }

    .modify_radio ul.words_radio{
        width: 540px;
        border:none;
        height: 0;
    }

    .layui-form-select .layui-input{
        width: 136px;
    }

    .layui-form-select{
        width: 136px;
        float:left;
        margin-right:10px;
    }

    .modify_conInfo>div{
        display:block;
        float:none;
    }

    .person_DL{
        float: left;
        display: block;
    }

    .person_GAT{
        float: left;
    }
    .red{
        color: red !important;
    }
    .uploadifive-queue-item{
        display: none;
    }
    .appearance_chart dl dt .uploadifive-button{
        border:1px solid #959595;
        border-radius: 5px;
        padding: 0 3px;
    }

    .layui-form-radio i{
        width: 18px;
        height: 18px;
        margin-top: -8px;
    }
    .uploadify{
        margin-top: 5px\0;
        border:0\0;
        text-align: left\0;
    }
    .mainStatusT {
        color: #3c9214;
        background-color: #dff2cf;
    }
    .mainStatus {
        padding: 2px 8px;
        margin-left: 5px;
        height: 20px;
        font-size: 12px;
        font-style: normal;
        border-radius: 15px;
        line-height: 20px;
    }
    .mainStatusD {
        color: #c56e00;
        background: #fce4bd;
    }
    .mainStatusF{
        color: #bd3a4b;
        background-color: #ffe2e2;
    }
</style>
<div class="personCenter_wrapp" id="pt_form" v-cloak>
    <div class="tradReg_Prompt" v-show="nowNodes.stepnum == 1 && showEntrust">
        <div class="tradReg_dear">
            <p>温馨提示</p>
            <h3>亲爱的果蜜：请填写以下内容，如有不明之处，可委托您的顾问处理。</h3>
            <button type="button" v-on:click="entrust" v-show="pData.isentrust=='0'">委托处理</button>
            <button type="button" v-on:click="cencelEntrust" v-show="pData.isentrust=='1'">取消委托</button>
            <span @click="showEntrust=!showEntrust"><img src="/img/icon-shoppingcart-close.png"/></span>
        </div>
    </div>
    <div class="personCenter_tab">
        <ul>
            <li>果蜜中心<span>></span></li>
            <li>订单中心<span>></span></li>
            <li>业务办理</li>
        </ul>
    </div>
    <div class="c_b"></div>
    <div class="words_Con">
        <div class="words_top">订单状态</div>
        <div class="words_bar">
            <b>订单号：${pData.orderCode}</b>
            <div class="order-fig">
                <div class="words_step" style="padding-top: 30px;">
                    <ul style="margin-left: -50px;">
                        <li style="margin-right: 0;" class="words_fk" v-for="allNodesList in allNodes" :class="{flowNode_did:nowNodes.stepnum>=allNodesList.stepnum,flowNode_w:nowNodes.stepnum<allNodesList.stepnum}">
                            <p>${allNodesList.titlename}</p>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="words_top words_write">填写资料</div>
        <!--<form @submit.prevent="validateForm('form-patent-wg')" data-vv-scope="form-patent-wg" v-if="pData.isentrust!=1">-->
        <form data-vv-scope="form-patent-wg" v-if="pData.isentrust!=1">
        <div class="words_left">
            <div class="words_tit">订单编号：${pData.orderCode}</div>
            <h3 class="words_h3">请选择您的主体</h3>
            <div class="words_body">
                    <div class="layui-form-item words_form">
                        <div class="layui-input-block" v-for="bodyList in orderCompany">
                            <div class="layui-unselect layui-form-radio" @click="bodyChoess(bodyList.id,0)" :class="{layui_form_radioed:patentBaseinfo.bodyId==bodyList.id}">
                                <i v-if="patentBaseinfo.bodyId==bodyList.id" class="layui-anim layui-icon"></i>
                                <i v-else class="layui-anim layui-icon"></i>
                                <span>${bodyList.companyname}</span>
                                <span class="mainStatusD mainStatus" v-if="bodyList.status==0">待审核</span>
                                <span class="mainStatusT mainStatus" v-if="bodyList.status==1">审核通过</span>
                                <span class="mainStatusF mainStatus" v-if="bodyList.status==-2">审核未通过</span>
                            </div>
                            <div class="layui-word-aux">${bodyList.address}</div>
                        </div>
                        <div class="layui-input-block" v-for="bodyList in orderBody">
                            <div class="layui-unselect layui-form-radio" @click="bodyChoess(bodyList.id,1)" :class="{layui_form_radioed:patentBaseinfo.bodyId==bodyList.id}">
                                <i v-if="patentBaseinfo.bodyId==bodyList.id" class="layui-anim layui-icon"></i>
                                <i v-else class="layui-anim layui-icon"></i>
                                <span>${bodyList.realname}</span>
                                <span class="mainStatusD mainStatus" v-if="bodyList.status==0">待审核</span>
                                <span class="mainStatusT mainStatus" v-if="bodyList.status==1">审核通过</span>
                                <span class="mainStatusF mainStatus" v-if="bodyList.status==-2">审核未通过</span>
                            </div>
                            <div class="layui-word-aux">${bodyList.sfzaddress}</div>
                        </div>
                        <div class="layui-input-block">
                            <div class="layui-unselect layui-form-radio" @click="bodyChoess(-10,-1)" :class="{layui_form_radioed:patentBaseinfo.bodyId==-1}">
                                <i v-if="patentBaseinfo.bodyId==-10" class="layui-anim layui-icon"></i>
                                <i v-else class="layui-anim layui-icon"></i>
                                <span>自然人</span>
                            </div>
                        </div>
                        <input  type="hidden" v-model="patentBaseinfo.bodyId" name="bodyId" class="inputW" v-validate="'required'" data-vv-as="主体信息"
                               :class="{'input': true, 'is-danger': errors.has('form-patent-wg.bodyId') }" />
                        <p class="red clear-both" style="margin-left: 120px" v-show="errors.has('form-patent-wg.bodyId')">${errors.first('form-patent-wg.bodyId')}
                    </div>
                    <h3 class="words_h3 words_work">专利申请信息</h3>
                    <div class="baseInfo">
                        <div class="modify_table1">
                            <ol>
                                <li><p><span>*</span>专利名称：</p>
                                    <input type="text" v-model="patentBaseinfo.patentName" name="patentName" class="inputW" v-validate="'required'" data-vv-as="作品名称"
                                           :class="{'input': true, 'is-danger': errors.has('form-patent-wg.patentName') }" placeholder="请输入作品名称"/>
                                    <p class="red clear-both" v-show="errors.has('form-patent-wg.patentName')">${errors.first('form-patent-wg.patentName')}</p>
                                </li>
                            </ol>
                        </div>
                    </div>
                    <div class="c_b"></div>
                    <div class="modify_conInfo">
                        <div class="modify_table1">
                            <div class="Comcn" v-for="(apply, index) in applyMans">
                                <div class="modify_radio">
                                    <p style="font-size:12px;color:#727f8f;"><span style="display: inline-block;color: #d9344b;margin-right: 3px;">*</span>第${index+1}申请人：</p>
                                    <ul class="words_radio">
                                        <li class="PerO" @click="apply.orgMan=0;persone();shenqing = 0;errors.clear();"><a class="modify_Choice" :class="{'modify_Choice1':apply.orgMan==0}" id="geren"></a>个人</li>
                                        <li class="PerT" @click="apply.orgMan=1;company();shenqing = 1;errors.clear();"><a class="modify_Choice" :class="{'modify_Choice1':apply.orgMan==1}" id="gongsi"></a>公司</li>
                                        <li class="appearance_people" @click="addApplyMan()">添加申请人</li>
                                        <li class="appearance_people" v-if="index>0" @click="delApplyMan(index)">删除申请人</li>
                                    </ul>
                                    <div class="c_b"></div>
                                </div>
                                <div class="person_DL">
                                    <ol>
                                        <li><p><span>*</span>
                                            <b v-html="apply.orgMan==0?'姓名':'公司名称'"></b>：</p>
                                            <input type="text" v-model="apply.applyMan"  name="applyMan"  class="inputW"  v-validate="'required'" data-vv-as="姓名或公司名称" style="width: 330px;float:left;":class="{'input': true, 'is-danger': errors.has('form-patent-wg.applyMan') }" />
                                            <a  class="modify_Choice" style="float:left; display:block;margin-top:12px;" :class="{'modify_Choice1':apply.isDelegate==1}" @click="apply.isDelegate==1?apply.isDelegate=0:apply.isDelegate=1;Exclusion(index)" ></a>
                                            <span style="font-size:12px;float:left;margin-top:12px;">标记代表人</span>
                                            <div class="clear"></div>
                                            <p  v-if="index==0" class="red clear-both" v-show="errors.has('form-patent-wg.applyMan')">${errors.first('form-patent-wg.applyMan')}</p>
                                        </li>
                                        <div style="clear:both"></div>
                                        <li v-if="apply.orgMan==0"><p><span>*</span>
                                            <b>身份证号</b>：
                                        </p>
                                            <input type="text" v-model="apply.certification" data-vv-as="身份证号" id="certification"  name="certification"  class="inputW"
                                                   v-validate="'required|sfzcode'" :class="{'input': true, 'is-danger': errors.has('form-patent-wg.certification') }" >
                                            <p  v-if="index==0" class="red clear-both" v-show="errors.has('form-patent-wg.certification')">${errors.first('form-patent-wg.certification')}</p>
                                        </li>
                                        <li v-if="apply.orgMan==1"><p><span>*</span>
                                            <b>组织机构代码</b>：
                                        </p>
                                            <input type="text" v-model="apply.certification" data-vv-as="组织机构代码" id="certification_c"  name="certification_c"  class="inputW"
                                                   v-validate="'required'" :class="{'input': true, 'is-danger': errors.has('form-patent-wg.certification_c') }" >
                                            <p  v-if="index==0" class="red clear-both" v-show="errors.has('form-patent-wg.certification_c')">${errors.first('form-patent-wg.certification_c')}</p>
                                        </li>
                                        <li><p><span>*</span>
                                            <b v-html="apply.orgMan==0?'通信地址':'公司地址'"></b>：</p>
                                            <input type="text" v-model="apply.address" data-vv-as="地址" name="address" class="inputW"
                                                   v-validate="'required'" :class="{'input': true, 'is-danger': errors.has('form-patent-wg.address') }" >
                                            <p  v-if="index==0" class="red clear-both" v-show="errors.has('form-patent-wg.address')">${errors.first('form-patent-wg.address')}</p>

                                        </li>
                                    </ol>
                                </div>
                                <ol>
                                    <li><p><span>*</span><b v-html="apply.orgMan==0?'身份证正面':'统一社会信用代码/组织机构代码证上传'"></b>：</p>
                                        <div class="modify_hover" >
                                            <div :class="{'modify_liner':!apply.picUrl  && !(apply.licencePath || apply.idPath)}" v-show="apply.licencePath ||apply.idPath">
                                                <input type="hidden" class="hide"  class="inputW">
                                                 <img :src="apply.picUrl||apply.idPath||apply.licencePath" width="68" height="88" id="img1"/>
                                                    <div :class="{'modify_liner':!apply.picUrl|| !apply.idPath|| !apply.licencePath,'hoverImg':apply.picUrl|| apply.idPath|| apply.licencePath}" @click="apply.licencePath='';apply.idPath=''">
                                                        <img src="/img/icon-companyinfo-delete.png"/>
                                                    </div>
                                            </div>
                                            <a class="layui-liner" v-show="!apply.licencePath && !apply.idPath">
                                                <div class="add">
                                                    <div class="addSfz" id="addSfz"></div>
                                                </div>
                                            </a>
                                        </div>
                                        <div :id="'file_upload_item_sfz'+index"></div>
                                        <div class="modify_hover"  v-show="apply.orgMan==1">
                                            <div :class="{'modify_liner': !apply.picUrl2 && !apply.orgPath}" v-if="apply.orgPath">
                                                <img :src="apply.picUrl2 ||apply.orgPath " width="68" height="88" id="img2"/>
                                                <div :class="{'modify_liner':!apply.picUrl2 ||apply.orgPath,'hoverImg':apply.picUrl2 ||apply.orgPath}" @click="apply.orgPath='';apply.picUrl2=''">
                                                    <img src="/img/icon-companyinfo-delete.png"/>
                                                </div>
                                            </div>
                                            <a class="layui-liner" v-show="!apply.orgPath">
                                                <div class="add">
                                                    <div class="addzzjg" id="addzzjg"></div>
                                                </div>
                                            </a>
                                        </div>
                                        <div :id="'file_upload_item_zzjg'+index"></div>
                                        <b class="modify_b">图片小于2M，允许类型(jpg,gif,png,bmp)</b>
                                    </li>
                                    <div style="clear: both"></div>
                                    <!--<div class="modify_drag">
                                        <div class="modify_file" style="float: none">
                                            <p><img src="/img/icon-companyinfo-upload.png"/>拖入文件或从<u>文件夹</u>中选择</p>
                                            <span>涉及权属，请上传清晰的营业执照。图片小于2M，允许类型(jpg,gif,png,bmp)</span>
                                        </div>
                                    </div>-->
                                    <p class="red clear-both" v-show="error">证件图是必填项</p>
                                </ol>
                                <div class="c_b"></div>
                            </div>
                            <ol v-for="(invent, index) in inventionMans">
                                <li><p><span>*</span>设计人姓名：</p>
                                    <input type="text" v-model="invent.man" data-vv-as="设计人姓名"   name="man"  class="inputW"  v-validate="'required'" :class="{'input': true, 'is-danger': errors.has('form-patent-wg.man') }" >
                                    <span class="modify_obtain" @click="addApplyInMan()">添加设计人</span>
                                    <span v-if="index!=0" class="modify_obtain" @click="delApplyInMan(index)">删除设计人</span>
                                    <p  v-if="index==0" class="red clear-both" v-show="errors.has('form-patent-wg.man')">${errors.first('form-patent-wg.man')}</p>
                                </li>
                                <li v-if="index==0"><p><span>*</span>设计人身份证号：</p>
                                    <input type="text" v-model="invent.postcard" data-vv-as="设计人身份证号"   name="postcard"  class="inputW"  v-validate="'required|sfzcode'" :class="{'input': true, 'is-danger': errors.has('form-patent-wg.postcard') }" >
                                    <p  v-if="index==0" class="red clear-both" v-show="errors.has('form-patent-wg.postcard')">${errors.first('form-patent-wg.postcard')}</p>
                                </li>
                                <li v-if="index==0"><p><span>*</span>设计人身份证：</p>
                                    <div class="modify_hover" >
                                    <div :class="{'modify_liner':!invent.picUrl && !invent.postcardPath}" v-show="invent.postcardPath">
                                        <input type="hidden" class="hide" class="inputW">
                                        <img :src="invent.picUrl||invent.postcardPath" width="68" height="88" id="img3"/>
                                        <div :class="{'modify_liner':!invent.picUrl || !invent.postcardPath,'hoverImg':invent.picUrl ||invent.postcardPath}" @click="invent.postcardPath='';invent.picUrl=''">
                                            <img src="/img/icon-companyinfo-delete.png"/>
                                        </div>
                                    </div>
                                    <a class="layui-liner"  v-show="!invent.postcardPath">
                                    <div class="add">
                                        <div class="addSjPic" id="addSjPic"></div>
                                    </div>
                                    </a>
                                    </div>
                                    <b class="modify_b">图片小于2M，允许类型(jpg,gif,png,bmp)</b>
                                    <div :id="'file_upload_item_sjr'+index"></div>
                                </li>
                                <div class="c_b"></div>
                                <p class="red clear-both" v-show="error1">证件图是必填项</p>
                            </ol>
                            <div style="clear: both"></div>
                            <!--<div class="modify_drag">
                                <div class="modify_file" style="float: none">
                                    <p><img src="/img/icon-companyinfo-upload.png"/>拖入文件或从<u>文件夹</u>中选择</p>
                                    <span>涉及权属，请上传清晰的营业执照。图片小于2M，允许类型(jpg,gif,png,bmp)</span>
                                </div>
                            </div>-->
                            <ol>
                                <li><p><span>*</span>技术联系人姓名：</p>
                                    <input type="text" v-model="patentBaseinfo.technicalMan" name="technicalMan" class="inputW"
                                           v-validate="'required'" data-vv-as="技术联系人姓名"
                                           :class="{'input': true, 'is-danger': errors.has('form-patent-wg.technicalMan') }" placeholder="技术联系人姓名"/>
                                    <p class="red clear-both" v-show="errors.has('form-patent-wg.technicalMan')">${errors.first('form-patent-wg.technicalMan')}</p>
                                </li>
                                <li><p><span>*</span>电话：</p>
                                    <input type="text" v-model="patentBaseinfo.tel" name="tel" class="inputW"
                                           v-validate="'required|phone'" data-vv-as="电话"
                                           :class="{'input': true, 'is-danger': errors.has('form-patent-wg.tel') }" placeholder="电话"/>
                                    <p class="red clear-both" v-show="errors.has('form-patent-wg.tel')">${errors.first('form-patent-wg.tel')}</p>
                                </li>
                                <li>
                                    <p><span>*</span>Email：</p>
                                    <input type="text" v-model="patentBaseinfo.email" name="email" class="inputW"
                                           v-validate="'required|emailNum'" data-vv-as="邮箱"
                                           :class="{'input': true, 'is-danger': errors.has('form-patent-wg.email')}" placeholder="邮箱"/>
                                    <p class="red clear-both" v-show="errors.has('form-patent-wg.email')">${errors.first('form-patent-wg.email')}</p>
                                </li>
                                <li><p><span>*</span>用途：</p><textarea v-model="patentBaseinfo.uses" name="uses"
                                                                      data-vv-as="用途"
                                                                      class="inputW" v-validate="'required'"
                                        :class="{'input': true, 'is-danger': errors.has('form-patent-wg.uses')}"></textarea>
                                    <p class="red clear-both" v-show="errors.has('form-patent-wg.uses')">${errors.first('form-patent-wg.uses')}</p>
                                </li>
                            </ol>
                            <div class="modify_radio">
                                <p style="font-size:12px;color:#727f8f;"><span style="display: inline-block;color: #d9344b;margin-right: 3px;">*</span>外国优先权：</p>
                                <ul class="words_radio">
                                    <li @click="patentBaseinfo.isPriority=1"><a class="modify_Choice "  :class="{'modify_Choice1':patentBaseinfo.isPriority==1}" @click="addisPriority()"></a>有</li>
                                    <li @click="patentBaseinfo.isPriority=0"><a class="modify_Choice"  :class="{'modify_Choice1':patentBaseinfo.isPriority==0}" @click="delisPriority()"></a>无</li>
                                </ul>
                            </div>
                            <div style="clear: both"></div>
                            <ol v-if="patentBaseinfo.isPriority==1">
                                <li><p><span>*</span>在先申请国别：</p><input type="text" v-model="patentBaseinfo.priorApplyCountry" name="priorApplyCountry"
                                                                       id="priorApplyCountry"
                                                                       data-vv-as="在先申请国别"
                                                                       class="inputW" v-validate="'required'"
                                                                       :class="{'input': true, 'is-danger': errors.has('form-patent-wg.priorApplyCountry')}"/>
                                    <p class="red clear-both" v-show="errors.has('form-patent-wg.priorApplyCountry')">${errors.first('form-patent-wg.priorApplyCountry')}</p>
                                </li>
                                <li><p><span>*</span>在先申请号：</p><input type="text" v-model="patentBaseinfo.priorApplyNo" name="priorApplyNo"
                                                                      id="priorApplyNo"
                                                                      data-vv-as="在先申请号"
                                                                      class="inputW" v-validate="'required'"
                                                                      :class="{'input': true, 'is-danger': errors.has('form-patent-wg.priorApplyNo')}"/>
                                    <p class="red clear-both" v-show="errors.has('form-patent-wg.priorApplyNo')">${errors.first('form-patent-wg.priorApplyNo')}</p>
                                </li>
                                <li><p><span>*</span>在先申请日：</p><input type="text" v-model="patentBaseinfo.priorApplyDate" name="priorApplyDate"
                                                                      id="priorApplyDate"
                                                                      data-vv-as="在先申请日"
                                                                      @click="setApplyDate('t',$event)"
                                                                      class="inputW" v-validate="'required'"
                                                                      :class="{'input': true, 'is-danger': errors.has('form-patent-wg1.priorApplyDate')}"/>
                                    <p class="red clear-both" v-show="errors.has('form-patent-wg.priorApplyDate')">${errors.first('form-patent-wg.priorApplyDate')}</p>
                                </li>
                            </ol>
                            <div style="clear: both"></div>
                            <div class="modify_radio">
                                <p style="font-size:12px;color:#727f8f;"><span style="display: inline-block;color: #d9344b;margin-right: 3px;">*</span>提前公布：</p>
                                <ul class="words_radio">
                                    <li style="width: auto" @click="patentBaseinfo.beforePublish==0?patentBaseinfo.beforePublish=1:patentBaseinfo.beforePublish=0"><a class="modify_Choice"  :class="{'modify_Choice1':patentBaseinfo.beforePublish==1}"></a>请求早日公布该专利申请（用于缩短审查周期）</li>
                                </ul>
                            </div>
                            <div style="clear: both"></div>
                            <ol>
                            <li><p><span></span>技术交底书：</p>
                                <div class="modify_hover" >
                                    <div :class="{'modify_liner':!patentBaseinfo.attachment2 && patentBaseinfo.attachment}" v-if="patentBaseinfo.attachment">
                                        <a v-if="patentBaseinfo.attachment2" :href="patentBaseinfo.attachment2" target="_blank">技术交底书，点击下载</a>
                                        <div :class="{'modify_liner':!patentBaseinfo.attachment2 || !patentBaseinfo.attachment ,'hoverImg':patentBaseinfo.attachment2 || !patentBaseinfo.attachment}" @click="patentBaseinfo.attachment='';patentBaseinfo.attachment2=''">
                                            <img src="/img/icon-companyinfo-delete.png"/>
                                        </div>
                                    </div>
                                    <a class="layui-liner"  v-show="!patentBaseinfo.attachment2">
                                        <div class="add">
                                            <div class="addJsjdPic" id="addJsjdPic"></div>
                                        </div>
                                    </a>
                                    <span class="text-danger" style="position: absolute;display: inline-block;top: 88px; width: 100px;" v-show="!patentBaseinfo.attachment2">请上传图片</span>
                                </div>
                                <b class="modify_b">附件小于10M，允许类型(jpg,gif,png,bmp,doc,pdf,docx)</b>
                                <div :id="'file_upload_item_Jsjd'"></div>
                                </li>
                             </ol>
                            <div style="clear: both"></div>
                        </div>
                        <div class="c_b"></div>
                        <div class="appearance_danger">
                                <h3>注意事项</h3>
                                <p>1、如果专利授权，还会产生制证的官费和知果果的服务费，发明专利需要向官方缴纳制证费255元，实用新型和外观需要向官方缴纳制证费205元，同时还需缴纳从申请日到授权日的年费，年费根据专利类型、减缓情况而不同，具体费用和顾问联系，知果果的服务费为100元。</p>
                                <p>2、如果申请人申请国内发明、实用新型申请时，已经提交过与本次申请相同或相似的专利申请，则需要向官方缴纳优先权要求费80元/件，具体地已提交过的专利申请是否会对本次申请造成影响，请与顾问确认。</p>
                            <div class="c_b"></div>
                        </div>
                    </div>
            </div>
            {{> adviser}}
            <div class="c_b"></div>
            <div class="words_button" v-if="pData.isentrust!=1">
                <!--<button type="submit" class="words_sub"  :disabled="showLoading" v-html="showLoading?'数据提交中...':'确认提交'"></button>-->
                <button type="button" class="words_sub"  :disabled="showLoading" v-html="showLoading?'数据提交中...':'确认提交'" @click="verification()"></button>
            </div>
        </div>
        </form>
        <div v-if="pData.isentrust==1"  class="words_left  layui-layer-content layui-layer-padding">
            <p style="color:#FF5722"><i class="layui-icon" style="font-size: 30px; color: #1E9FFF;">&#xe60c;</i>已进行业务委托处理</p>
        </div>
      {{> orderList}}
    </div>
</div>
<script type="text/javascript">
    layui.use(['layer'], function () {});
    var phone = {
        messages: {
            en: function en(field, args) {
                return args + '请输入正确的手机号码';
            }
        },
        validate: function validate(value, args) {
            return (/^(1[3-9][0-9]{9})$/.test(value));
        }
    };
    VeeValidate.Validator.extend('phone', phone);
    var sfzcode = {
        messages: {
            en: function en(field, args) {
                return args + '请输入正确的身份证号';
            }
        },
        validate: function validate(value, args) {
            return (/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|[X|x])$/.test(value));
        }
    };
    var emailNum = {
        messages: {
            en: function en(field, args) {
                return args + '请输入正确的邮箱号';
            }
        },
        validate: function validate(value, args) {
            return (/\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}/.test(value));
        }
    };
    VeeValidate.Validator.extend('emailNum', emailNum);
    VeeValidate.Validator.extend('sfzcode', sfzcode);
    var patentData = {{{ patentData }}};
    var orderBody = {{{ orderBody }}};
    var allNodes = {{{ allNodes }}};
    var nowNodes = {{{ nowNodes }}};
    var odata = {{{ oData }}};
    var ptMsgVM = new Vue({
        el: '#pt_form',
        delimiters: ["${", "}"],
        data: {
            error: false,
            error1: false,
            shenqing: 0,
            pData:patentData.data.orderDetail,
            orderBody:orderBody.data.userBodyList,
            orderCompany:orderBody.data.userCompanyList,
            allNodes:allNodes.data,
            nowNodes:nowNodes.data,
            patentBaseinfo:{
                bodyType:patentData.data.patentBaseinfo?patentData.data.patentBaseinfo.bodyType : 1,
                bodyId:patentData.data.patentBaseinfo?patentData.data.patentBaseinfo.bodyId :  "",
                isPriority:patentData.data.patentBaseinfo?patentData.data.patentBaseinfo.isPriority :  0,
                patentName:patentData.data.patentBaseinfo?patentData.data.patentBaseinfo.patentName :  "",
                attachment:patentData.data.patentBaseinfo?patentData.data.patentBaseinfo.attachment :  'poto_pic',
                attachment2:patentData.data.patentBaseinfo?patentData.data.patentBaseinfo.attachment:'',
                tel:patentData.data.patentBaseinfo?patentData.data.patentBaseinfo.tel : "",
                technicalMan:patentData.data.patentBaseinfo?patentData.data.patentBaseinfo.technicalMan :  "",
                email:patentData.data.patentBaseinfo?patentData.data.patentBaseinfo.email :  "",
                uses:patentData.data.patentBaseinfo?patentData.data.patentBaseinfo.uses :  "",
                orderid:patentData.data.orderDetail.orderId,
               /* isSameDayApply:0,*/
                beforePublish:patentData.data.patentBaseinfo?patentData.data.patentBaseinfo.beforePublish :  1,
                priorApplyDate:patentData.data.patentBaseinfo?patentData.data.patentBaseinfo.priorApplyDate :  "",
                id:patentData.data.patentBaseinfo?patentData.data.patentBaseinfo.id : '',
                priorApplyCountry:patentData.data.patentBaseinfo?patentData.data.patentBaseinfo.priorApplyCountry : '' ,
                priorApplyNo:patentData.data.patentBaseinfo?patentData.data.patentBaseinfo.priorApplyNo : ''
            },
            tempMans: {
                orderid:patentData.data.orderDetail.orderId,
                orgMan:"0",
                applyMan:'',
                certification:'',
                address:'',
                /*province:"12",
                city:"",
                county:"区县",*/
                isDelegate:"0",
                licencePath:"",
                orgPath:"",
            },
            tempInMans:{
                orderid:patentData.data.orderDetail.orderId,
                man:'',
                postcard:'',
                postcardPath:''
            },
            applyMans:patentData.data.applyMans ||[{orgMan:"0",isDelegate:0}], //申请人
            inventionMans:patentData.data.inventionMans ||[{}], //设计人
            patentInfoExtends:[],
            adviser:"",
            gwPicUrl:zgg.Vconfig.gwPicUrl,
            ImgUrl:zgg.Vconfig.ImgUrl,
            odataList:[],
            showLoading:help.showLoading,
            showEntrust:true,//显示委托
    },
        /*created:function () {
            this.applyMans.push(this.tempMans);
            this.inventionMans.push(this.tempInMans);
        },*/
        created:function(){
            this.$validator.detach("priorApplyCountry",'form-patent-wg');
            this.$validator.detach("priorApplyNo",'form-patent-wg');
            this.$validator.detach("priorApplyDate",'form-patent-wg');
            this.errors.clear('form-patent-wg');

        },
        mounted:function () {
            /*this.applyMans.push($.extend({},this.tempMans));
            this.inventionMans.push(this.tempInMans);*/
            //证明文件上传
            if(navigator.appName == "Microsoft Internet Explorer" && navigator.appVersion .split(";")[1].replace(/[ ]/g,"")=="MSIE9.0"){
                $('.fileupload').map(function(i,t){
                    $(t).uploadify({
                        'auto' : true,
                        'queueID' : 'file_upload_item_'+i,
                        'swf'      : '/lib/uploadify.swf',
                        'uploader' : '/upload/profile',
                        'buttonCursor':'hand',
                        'buttonText':'上传文件',
                        'width':'auto',
                        'fileSizeLimit ': 1024 * 1024 * 2,
                        'fileType': '*.jpg;*.bmp;*.jpeg;*.png;*.gif;',
                        'method' : 'post',
                        'progressData':'percentage',
                        'formData':{
                            'orderId':patentData.data.orderDetail.orderId,
                            'stepType':nowNodes.data.stepnum,
                            'stepId':nowNodes.data.id,
                            "uploadType":"uploadPatPic",
                        },
                        'onDrop':function(file, fileDropCount) {
                            debugger;
                        },
                        'onUploadSuccess' : function(file, data, response) {
                            var data = JSON.parse(data),
                                    ImgUrl = zgg.Vconfig.contractUrl +  data.data;
                            Vue.set(ptMsgVM.attachmentText[i],'picUrl',ImgUrl);
                            Vue.set(ptMsgVM.attachmentText[i],'picUrlNotH',data.data);
                        },
                        'onFallback':function () {
                            layer.msg('请安装或升级更高版本的Flash插件');
                        },
                        'onError' : function (file, data, response) {
                            debugger;
                        }
                    })
                });
            }else{
                $('.fileupload').map(function(i,t){
                    $(t).uploadifive({
                        'auto' : true,
                        'queueID' : 'file_upload_item_'+i,
                        'checkScript':'/upload/check',
                        'uploadScript' : '/upload/profile',
                        'buttonCursor':'hand',
                        'buttonText':'上传文件',
                        'width':'auto',
                        'fileSizeLimit ': 1024 * 1024 * 2,
                        'fileType': '*.jpg;*.bmp;*.jpeg;*.png;*.gif',
                        'method' : 'post',
                        'progressData':'percentage',
                        'formData':{
                            'orderId':patentData.data.orderDetail.orderId,
                            'stepType':nowNodes.data.stepnum,
                            'stepId':nowNodes.data.id,
                            "uploadType":"uploadPatPic",
                        },
                        'onDrop':function(file, fileDropCount) {
                            debugger;
                        },
                        'onUploadComplete' : function(file, data, response) {
                            var data = JSON.parse(data),
                                    ImgUrl = zgg.Vconfig.contractUrl +  data.data;
                            Vue.set(ptMsgVM.attachmentText[i],'picUrl',ImgUrl);
                            Vue.set(ptMsgVM.attachmentText[i],'picUrlNotH',data.data);
                        },
                        'onCheck'  : function(file, exists) {
                            if (exists) {
                                layer.msg("您上传的文件格式或大小有误");
                                $(t).uploadifive('cancel', file)
                            }
                        },
                        'onError' : function (file, data, response) {
                            debugger;
                        }
                    })
                });
            }

            this.setSfzPicInit();
            this.getGwInfo();
        },
        methods: {
            Exclusion:function(isD){
                console.log(isD)
                ptMsgVM.applyMans.map(function(v,i){
                    v.isDelegate = 0;
                })
                ptMsgVM.applyMans[isD].isDelegate = 1;
            },
            verification:function(){

                if($('#geren').attr('class').length > $('#gongsi').attr('class').length) {
                    this.shenqing = 0;
                }else if($('#geren').attr('class').length < $('#gongsi').attr('class').length){
                    this.shenqing = 1;
                }

                var _self = this;
                    this.$validator.validateAll('form-patent-wg').then(function (result) {
                        if(result){
                            if(_self.shenqing == 1){
                                if(typeof $('#img1').attr('src') == 'undefined' || $('#img1').attr('src') == ''){
                                    _self.error = true;
                                    layer.msg('请上传资料')
                                    return;
                                }
                                if(typeof $('#img2').attr('src') == 'undefined' || $('#img2').attr('src') == ''){
                                    _self.error = true;
                                    layer.msg('请上传资料')
                                    return;
                                }
                                if(typeof $('#img3').attr('src') == 'undefined' || $('#img3').attr('src') == ''){
                                    _self.error1 = true;
                                    layer.msg('请上传资料')
                                    return;
                                }
                                if(typeof _self.patentBaseinfo.attachment2 == 'undefined' || _self.patentBaseinfo.attachment2 == ''){
                                    layer.msg('请上传资料')
                                    return;
                                }
                                _self.error = false;
                                _self.error1 = false;
                                layer.msg('成功');
                                ptMsgVM.validateForm('form-patent-wg');
                                /*if(!_self.patentBaseinfo.attachment2 && $('#img1').attr('src') == '' || $('#img2').attr('src') == '' || $('#img3').attr('src') == ''){
                                    layer.msg('请上传资料')
                                }else if(!_self.patentBaseinfo.attachment2 && $('#img1').attr('src') == 'undefined' || $('#img2').attr('src') == 'undefined' || $('#img3').attr('src') == 'undefined'){
                                    layer.msg('请上传资料')
                                } else if(_self.patentBaseinfo.attachment2  && $('#img1').attr('src') != '' && $('#img2').attr('src') != '' && $('#img3').attr('src') != ''){
                                    layer.msg('成功');
                                    ptMsgVM.validateForm('form-patent-wg');
                                }*/
                            }else if(_self.shenqing == 0){
                                if(typeof $('#img1').attr('src') == 'undefined' || $('#img1').attr('src') == ''){
                                    _self.error = true;
                                    layer.msg('请上传资料')
                                    return;
                                }
                                if(typeof $('#img3').attr('src') == 'undefined' || $('#img3').attr('src') == ''){
                                    _self.error1 = true;
                                    layer.msg('请上传资料')
                                    return;
                                }
                                if(typeof _self.patentBaseinfo.attachment2 == 'undefined' || _self.patentBaseinfo.attachment2 == ''){
                                    layer.msg('请上传资料')
                                    return;
                                }
                                _self.error = false;
                                _self.error1 = false;
                                layer.msg('成功');
                                ptMsgVM.validateForm('form-patent-wg');
                            }

                        }
                    })

            },
            delisPriority:function(){
                this.$validator.detach("priorApplyCountry",'form-patent-wg');
                this.$validator.detach("priorApplyNo",'form-patent-wg');
                this.$validator.detach("priorApplyDate",'form-patent-wg');
                this.errors.clear('form-patent-wg');
            },
            addisPriority:function(){
                this.$validator.attach('priorApplyCountry', 'required', {scope:'form-patent-wg',prettyName:"在先申请国别",getter:function ()
                {return $("#priorApplyCountry").val();},context:function(){return $("#priorApplyCountry").context}});
                this.$validator.attach('priorApplyNo', 'required', {scope:'form-patent-wg',prettyName:"在先申请号",getter:function ()
                {return $("#priorApplyNo").val();},context:function(){return $("#priorApplyNo").context}});
                this.$validator.attach('priorApplyDate', 'required', {scope:'form-patent-wg',prettyName:"在先申请日",getter:function ()
                {return $("#priorApplyDate").val();},context:function(){return $("#priorApplyDate").context}});
                this.errors.clear('form-patent-wg');
            },
            persone:function(){
                this.$validator.attach('certification', 'required|sfzcode', {scope:'form-patent-wg',prettyName:"身份证",getter:function ()
                {return $("#certification").val();},context:function(){return $("#certification").context}});
                this.$validator.detach("certification_c",'form-patent-wg');
                this.errors.clear(form-patent-wg);
            },
            company:function(){
                this.$validator.attach('certification_c', 'required', {scope:'form-patent-wg',prettyName:"组织机构代码",getter:function ()
                {return $("#certification_c").val();},context:function(){return $("#certification_c").context}});
                this.$validator.detach("certification",'form-patent-wg');
                this.errors.clear(form-patent-wg);
            },
            bodyChoess:function (bId, tId) {
                this.patentBaseinfo.bodyId = bId;
                this.patentBaseinfo.bodyType = tId;
            },
            addApplyMan:function () {
                    this.applyMans.push($.extend({},this.tempMans));
                    this.setSfzPicInit();
            },
            addApplyInMan:function () {
                    this.inventionMans.push($.extend({},this.tempInMans));
            },
            delApplyMan:function (index) {
                this.applyMans.splice(index,1);
            },
            delApplyInMan:function (index) {
                this.inventionMans.splice(index,1);
            },
            setEdit:function (item,v){
                ptMsgVM.$set(item,'isEdit',v);
            },
            setPtUploadInit:function () {
                //图片上传
                setTimeout(function(){
                    $('.addpInfo').map(function(i,t){
                        $(t).uploadifive({
                            'auto' : true,
                            'queueID' : 'file_upload_item_pInfo_'+i,
                            'swf'      : '/lib/uploadify.swf',
                            'uploadScript' : '/upload/profile',
                            'buttonCursor':'hand',
                            'buttonText':'上传文件',
                            'width':'auto',
                            'fileSizeLimit ': 1024 * 1024 * 2,
                            'fileType': '*.jpg;*.bmp;*.jpeg;*.png;*.gif',
                            'method' : 'post',
                            'progressData':'percentage',
                            'formData':{
                                'orderId':patentData.data.orderDetail.orderId,
                                'stepType':nowNodes.data.stepnum,
                                'stepId':nowNodes.data.id,
                                'fType':"ft_5",
                            },
                            'onDrop':function(file, fileDropCount) {
                                debugger;
                            },
                            'onUploadComplete' : function(file, data, response) {
                                debugger
                                var data = JSON.parse(data),
                                        ImgUrl = zgg.Vconfig.contractUrl +  data.data.filePath;
                                Vue.set(ptMsgVM.patentInfoExtends[i],'picUrl',ImgUrl);
                                Vue.set(ptMsgVM.patentInfoExtends[i],'picPath',data.data.filePath);
                            },
                            'onCheck'  : function(file, exists) {
                                if (exists) {
                                    layer.msg("您上传的文件格式或大小有误");
                                    $(t).uploadifive('cancel', file)
                                }
                            },
                            'onError' : function (file, data, response) {
                                debugger;
                            }
                        })
                    })
                },100)
            },
            setSfzPicInit:function () {
                if(navigator.appName == "Microsoft Internet Explorer" && navigator.appVersion .split(";")[1].replace(/[ ]/g,"")=="MSIE9.0"){
                    //图片上传
                    setTimeout(function () {
                        $(".addSfz").map(function (i,t) {
                            $(t).uploadify({
                                'auto' : true,
                                'queueID' : 'file_upload_item_sfz'+i,
                                'swf'      : '/lib/uploadify.swf',
                                'uploader' : '/upload/profile',
                                'buttonCursor':'hand',
                                'buttonText':'',
                                "buttonClass":"addFile",
                                'width': 90,
                                'method' : 'post',
                                'fileSizeLimit ': 1024 * 1024 * 2,
                                'fileType': '*.jpg;*.bmp;*.jpeg;*.png;*.gif',
                                'progressData':'percentage',
                                'formData':{
                                    'orderId':patentData.data.orderDetail.orderId,
                                    'stepType':nowNodes.data.stepnum,
                                    'stepId':nowNodes.data.id,
                                    'fType':"ft_5"
                                },
                                'onDrop':function(file, fileDropCount) {
                                    debugger;
                                },
                                'onUploadSuccess' : function(file, data, response) {
                                    var data = JSON.parse(data),
                                            ImgUrl = zgg.Vconfig.contractUrl +  data.data.filePath;
                                    Vue.set(ptMsgVM.applyMans[i],'picUrl',ImgUrl);
                                    //区分身份证和组织机构代码 idPath , licencePath
                                    Vue.set(ptMsgVM.applyMans[i],'licencePath',data.data.filePath);
                                    Vue.set(ptMsgVM.applyMans[i],'idPath',data.data.filePath);
                                },
                                'onFallback':function () {
                                    layer.msg('请安装或升级更高版本的Flash插件');
                                },
                                'onError' : function (file, data, response) {
                                    debugger;
                                }
                            })
                        });
                        //设计人身份证上传
                        $(".addSjPic").map(function (i,t) {
                            $(t).uploadify({
                                'auto' : true,
                                'queueID' : 'file_upload_item_sjr'+i,
                                'swf'      : '/lib/uploadify.swf',
                                'uploader' : '/upload/profile',
                                'buttonCursor':'hand',
                                'fileSizeLimit ': 1024 * 1024 * 2,
                                'fileType': '*.jpg;*.bmp;*.jpeg;*.png;*.gif',
                                'buttonText':'',
                                "buttonClass":"addFile",
                                'width': 90,
                                'method' : 'post',
                                'progressData':'percentage',
                                'formData':{
                                    'orderId':patentData.data.orderDetail.orderId,
                                    'stepType':nowNodes.data.stepnum,
                                    'stepId':nowNodes.data.id,
                                    'fType':"ft_5"
                                },
                                'onDrop':function(file, fileDropCount) {
                                    debugger;
                                },
                                'onUploadSuccess' : function(file, data, response) {
                                    debugger;
                                    var data = JSON.parse(data),
                                            ImgUrl = zgg.Vconfig.contractUrl +  data.data.filePath;
                                    Vue.set(ptMsgVM.inventionMans[i],'picUrl',ImgUrl);
                                    Vue.set(ptMsgVM.inventionMans[i],'postcardPath',data.data.filePath);
                                },
                                'onFallback':function () {
                                    layer.msg('请安装或升级更高版本的Flash插件');
                                },
                                'onError' : function (file, data, response) {
                                    debugger;
                                }
                            })
                        });
                        // 组织机构代码
                        $(".addzzjg").map(function (i,t) {
                            $(t).uploadify({
                                'auto' : true,
                                'queueID' : 'file_upload_item_zzjg'+i,
                                'swf'      : '/lib/uploadify.swf',
                                'uploader' : '/upload/profile',
                                'buttonCursor':'hand',
                                'buttonText':'',
                                "buttonClass":"addFile",
                                'width': 90,
                                'method' : 'post',
                                'progressData':'percentage',
                                'formData':{
                                    'orderId':patentData.data.orderDetail.orderId,
                                    'stepType':nowNodes.data.stepnum,
                                    'stepId':nowNodes.data.id,
                                    'fType':"ft_5"
                                },
                                'onDrop':function(file, fileDropCount) {
                                    debugger;
                                },
                                'onUploadSuccess' : function(file, data, response) {
                                    var data = JSON.parse(data),
                                            ImgUrl = zgg.Vconfig.contractUrl +  data.data.filePath;
                                    Vue.set(ptMsgVM.applyMans[i],'picUrl2',ImgUrl);
                                    //组织机构代码 , licencePath
                                    Vue.set(ptMsgVM.applyMans[i],'orgPath',data.data.filePath);
                                },
                                'onFallback':function () {
                                    layer.msg('请安装或升级更高版本的Flash插件');
                                },
                                'onError' : function (file, data, response) {
                                    debugger;
                                }
                            })
                        });
                        //技术交底
                        $('.addJsjdPic').uploadify({
                            'auto' : true,
                            'queueID' : 'file_upload_item_Jsjd',
                            'swf'      : '/lib/uploadify.swf',
                            'uploader' : '/upload/profile',
                            'buttonCursor':'hand',
                            'buttonText':'上传文件',
                            'width':'auto',
                            'method' : 'post',
                            'progressData':'percentage',
                            'formData':{
                                'orderId':patentData.data.orderDetail.orderId,
                                'stepType':nowNodes.data.stepnum,
                                'stepId':nowNodes.data.id,
                                'fType':"ft_5",
                            },
                            'onDrop':function(file, fileDropCount) {
                                debugger;
                            },
                            'onUploadSuccess' : function(file, data, response) {
                                var data = JSON.parse(data),
                                        ImgUrl = zgg.Vconfig.contractUrl +  data.data.filePath;
                                Vue.set(ptMsgVM.patentBaseinfo,'attachment2',ImgUrl);
                                Vue.set(ptMsgVM.patentBaseinfo,'attachment',data.data.filePath);
                            },
                            'onFallback':function () {
                                layer.msg('请安装或升级更高版本的Flash插件');
                            },
                            'onError' : function (file, data, response) {
                                debugger;
                            }
                        });
                    },1000);
                }else{
                    //图片上传
                    setTimeout(function () {
                        $(".addSfz").map(function (i,t) {
                            $(t).uploadifive({
                                'auto' : true,
                                'queueID' : 'file_upload_item_sfz'+i,
                                'checkScript':'/upload/check',
                                'uploadScript' : '/upload/profile',
                                'buttonCursor':'hand',
                                'buttonText':'',
                                "buttonClass":"addFile",
                                'width': 90,
                                'method' : 'post',
                                'fileSizeLimit ': 1024 * 1024 * 2,
                                'fileType': '*.jpg;*.bmp;*.jpeg;*.png;*.gif',
                                'progressData':'percentage',
                                'formData':{
                                    'orderId':patentData.data.orderDetail.orderId,
                                    'stepType':nowNodes.data.stepnum,
                                    'stepId':nowNodes.data.id,
                                    'fType':"ft_5"
                                },
                                'onDrop':function(file, fileDropCount) {
                                    debugger;
                                },
                                'onUploadComplete' : function(file, data, response) {
                                    var data = JSON.parse(data),
                                            ImgUrl = zgg.Vconfig.contractUrl +  data.data.filePath;
                                    Vue.set(ptMsgVM.applyMans[i],'picUrl',ImgUrl);
                                    //区分身份证和组织机构代码 idPath , licencePath
                                    Vue.set(ptMsgVM.applyMans[i],'licencePath',data.data.filePath);
                                    Vue.set(ptMsgVM.applyMans[i],'idPath',data.data.filePath);
                                },
                                'onCheck'  : function(file, exists) {
                                    if (exists) {
                                        layer.msg("您上传的文件格式或大小有误");
                                        $(t).uploadifive('cancel', file)
                                    }
                                },
                                'onError' : function (file, data, response) {
                                    debugger;
                                }
                            })
                        });
                        //设计人身份证上传
                        $(".addSjPic").map(function (i,t) {
                            $(t).uploadifive({
                                'auto' : true,
                                'queueID' : 'file_upload_item_sjr'+i,
                                'checkScript':'/upload/check',
                                'uploadScript' : '/upload/profile',
                                'buttonCursor':'hand',
                                'fileSizeLimit ': 1024 * 1024 * 2,
                                'fileType': '*.jpg;*.bmp;*.jpeg;*.png;*.gif',
                                'buttonText':'',
                                "buttonClass":"addFile",
                                'width': 90,
                                'method' : 'post',
                                'progressData':'percentage',
                                'formData':{
                                    'orderId':patentData.data.orderDetail.orderId,
                                    'stepType':nowNodes.data.stepnum,
                                    'stepId':nowNodes.data.id,
                                    'fType':"ft_5"
                                },
                                'onDrop':function(file, fileDropCount) {
                                    debugger;
                                },
                                'onUploadComplete' : function(file, data, response) {
                                    debugger;
                                    var data = JSON.parse(data),
                                            ImgUrl = zgg.Vconfig.contractUrl +  data.data.filePath;
                                    Vue.set(ptMsgVM.inventionMans[i],'picUrl',ImgUrl);
                                    Vue.set(ptMsgVM.inventionMans[i],'postcardPath',data.data.filePath);
                                },
                                'onCheck'  : function(file, exists) {
                                    if (exists) {
                                        layer.msg("您上传的文件格式或大小有误");
                                        $(t).uploadifive('cancel', file)
                                    }
                                },
                                'onError' : function (file, data, response) {
                                    debugger;
                                }
                            })
                        });
                        // 组织机构代码
                        $(".addzzjg").map(function (i,t) {
                            $(t).uploadifive({
                                'auto' : true,
                                'queueID' : 'file_upload_item_zzjg'+i,
                                'checkScript':'/upload/check',
                                'uploadScript' : '/upload/profile',
                                'buttonCursor':'hand',
                                'buttonText':'',
                                "buttonClass":"addFile",
                                'width': 90,
                                'method' : 'post',
                                'progressData':'percentage',
                                'formData':{
                                    'orderId':patentData.data.orderDetail.orderId,
                                    'stepType':nowNodes.data.stepnum,
                                    'stepId':nowNodes.data.id,
                                    'fType':"ft_5"
                                },
                                'onDrop':function(file, fileDropCount) {
                                    debugger;
                                },
                                'onUploadComplete' : function(file, data, response) {
                                    var data = JSON.parse(data),
                                            ImgUrl = zgg.Vconfig.contractUrl +  data.data.filePath;
                                    Vue.set(ptMsgVM.applyMans[i],'picUrl2',ImgUrl);
                                    //组织机构代码 , licencePath
                                    Vue.set(ptMsgVM.applyMans[i],'orgPath',data.data.filePath);
                                },
                                'onCheck'  : function(file, exists) {
                                    if (exists) {
                                        layer.msg("您上传的文件格式或大小有误");
                                        $(t).uploadifive('cancel', file)
                                    }
                                },
                                'onError' : function (file, data, response) {
                                    debugger;
                                }
                            })
                        });
                        //技术交底
                        $('.addJsjdPic').uploadifive({
                            'auto' : true,
                            'queueID' : 'file_upload_item_Jsjd',
                            'checkScript':'/upload/check',
                            'uploadScript' : '/upload/profile',
                            'buttonCursor':'hand',
                            'buttonText':'上传文件',
                            'width':'auto',
                            'method' : 'post',
                            'progressData':'percentage',
                            'formData':{
                                'orderId':patentData.data.orderDetail.orderId,
                                'stepType':nowNodes.data.stepnum,
                                'stepId':nowNodes.data.id,
                                'fType':"ft_5",
                            },
                            'onDrop':function(file, fileDropCount) {
                                debugger;
                            },
                            'onUploadComplete' : function(file, data, response) {
                                var data = JSON.parse(data),
                                        ImgUrl = zgg.Vconfig.contractUrl +  data.data.filePath;
                                Vue.set(ptMsgVM.patentBaseinfo,'attachment2',ImgUrl);
                                Vue.set(ptMsgVM.patentBaseinfo,'attachment',data.data.filePath);
                            },
                            'onCheck'  : function(file, exists) {
                                if (exists) {
                                    layer.msg("您上传的文件格式或大小有误");
                                    $('.addJsjdPic').uploadifive('cancel', file)
                                }
                            },
                            'onError' : function (file, data, response) {
                                debugger;
                            }
                        });
                    },1000);
                }

            },
            validateForm:function (scope) {
                this.$validator.validateAll(scope).then(function (result) {
                    ptMsgVM.showLoading = true
                    if(result){
                         //保存专利
                        debugger;
                            axios.post('/business/saveOrUpdatePatent',ptMsgVM.checkSubmitData()).then(
                                    function (res) {
                                        if(res.data.success){
                                            layui.use('layer',function() {
                                                layer.msg("提交成功！！！",{icon:1});
                                                window.location.reload();
                                            })
                                        }
                                    },
                                    function(err){
                                        console.log(err);
                                    }
                            )
                    }
                })
            },
            checkSubmitData:function () {
                if(this.patentBaseinfo.bodyId == -10){
                    this.patentBaseinfo.bodyId = "";
                    this.patentBaseinfo.bodyType = "";
                }
                var submitData = {
                    orderId:patentData.data.orderDetail.orderId,
                    nextStep : true, //是否暂存
                    ptType : "pt_ow",
                    stepId : this.nowNodes.id,
                    patentBaseinfo : this.patentBaseinfo,
                    inventionMans : this.inventionMans,
                    applyMans : this.applyMans,
                }
                return submitData;
            },
            addPantentInfo:function () {
                this.patentInfoExtends.push({
                    orderId:patentData.data.orderDetail.orderId,
                    picPath:""
                })
                this.setPtUploadInit();
            },
            entrust:function(){
                axios.post('/business/entrust/' + ptMsgVM.pData.orderId).then(
                        function (res) {
                            if(res.data.success){
                                layer.msg('委托办理成功');
                                window.location.reload();
                            }
                        }
                )
            },
            cencelEntrust:function(){
                axios.post('/business/cancelentrust/' + ptMsgVM.pData.orderId).then(
                        function (res) {
                            if(res.data.success){
                                layer.msg('成功取消委托处理');
                                window.location.reload();
                            }
                        }
                )
            },
            getGwInfo:function () {
                axios.get('/userCenter/userCounselorByPcode/'+patentData.data.orderDetail.pcode).then(
                        function (res) {
                            if(res){
                                debugger;
                                ptMsgVM.adviser = res.data;
                            }
                        },
                        function (err) {
                            console.log(err);
                        }
                )

            },
            page:function () {
                $.post('/userCenter/homeOrderPage',{pageNo:ptMsgVM.currentPage,pageSize:5},function (res) {
                    if(res.data && res.success){
                        ptMsgVM.odataList = res.data.list;
                    }
                })
            },
            setApplyDate:function (t,$e) {
                layui.laydate({elem: $e.currentTarget, istime: false, format: 'YYYY-MM-DD',choose:function(datas) {ptMsgVM.patentBaseinfo.priorApplyDate = datas;}})
            }
        },
    });
    ptMsgVM.$watch('patentBaseinfo.attachment',function (n,o) {
        //设置为APP类型加载附件设置
        if(n=='app_pic'){
            ptMsgVM.setPtUploadInit();
        }
    })
    layui.use('laydate', function() {
        var laydate = layui.laydate,$ = layui.jquery, layer = layui.layer;
    });
    layui.use(['laypage', 'layer'], function(){
        var laypage = layui.laypage
                ,layer = layui.layer;
        laypage({
            cont: 'demo4',
            curr: odata.totalPage,
            pages: Math.ceil(parseInt(odata.data.totalCount)/5),
            first: false,
            last: false,
            jump: function (e) {
                ptMsgVM.currentPage = e.curr;
                ptMsgVM.page();
            }
        });
    });
</script>
